<!--<div class="search-container mb-4">-->
  <%#= search_form_for @q, url: books_path, method: :get, html: { class: "form-inline" } do |f| %>
<!--    <div class="form-group mr-2">-->
      <%#= f.search_field :name_cont, placeholder: "Название книги", class: "form-control" %>
<!--    </div>-->
<!--    <div class="form-group mr-2">-->
      <%#= f.search_field :author_name_cont, placeholder: "Автор", class: "form-control" %>
<!--    </div>-->
<!--    <div class="form-group">-->
      <%#= f.submit "Поиск", class: "btn btn-primary" %>
<!--    </div>-->
  <%# end %>
<!--</div>-->

<div class="card-container mt-2 rounded">
  <% @top_books.each do |book| %>
    <div class="card-item">
      <%= link_to book_path(book), class: "card-link" do %>
        <div class="card-image">
          <%= image_tag book.image.url, alt: book.name, class: "card-img" %>
          <div class="chapter-overlay">
            <span>By:  <%= book.author_name %></span>
          </div>
        </div>
        <div class="card-title">
          <%= book.name.truncate(25) %>
        </div>
      <% end %>
    </div>
  <% end %>
</div>

<div class="container mt-5">
  <h1>Books</h1>
  <div class="d-flex justify-content-end mb-3">
    <%= link_to 'Add New Book', new_book_path, class: 'btn btn-primary' %>
  </div>
  <div class="table-responsive">
    <table class="table table-striped table-hover ">
      <thead>
      <tr>
        <th>Image</th>
        <th>Book Name</th>
        <th>Author</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
      </thead>
      <tbody>
      <% @books.each do |book| %>
        <tr>
          <td>
            <% if book.image_url.present? %>
              <img src="<%= book.image_url %>" alt="<%= book.name %>" class="img-thumbnail" style="max-height: 100px;max-width:125px;">
            <% else %>
              <span>No Image</span>
            <% end %>
          </td>
          <td>
            <%= link_to book.name, book_path(book) %>
          </td>
          <td><%= book.author_name %></td>
          <td>
            <% unless book.available %>
              <span class="text-danger">Out (Taken by <%= book.histories.last.user.username %>)</span>
            <% else %>
              <span class="text-success">In</span>
            <% end %>
          </td>
          <td>
            <%= link_to 'Edit', edit_book_path(book), class: 'btn btn-warning btn-sm' %>
            <%= link_to 'Delete', book_path(book), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger btn-sm' %>
          </td>
        </tr>
      <% end %>
      </tbody>
    </table>
  </div>
  <%= paginate @books %>
</div>